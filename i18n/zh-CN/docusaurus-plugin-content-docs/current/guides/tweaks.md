---
title: 模块
sidebar_position: 3
---

# 使用插件

LiveContainer 提供了一种无需事先将模块注入应用即可使用的方法。仍然建议直接注入,因为并非所有插件都能正确使用 LiveContainer 的 TweakLoader。

LiveContainer 附带自己的 TweakLoader,它会自动加载 Ellekit 和模块。TweakLoader 被注入到您安装的每个应用中。如果您愿意,可以用自己的实现覆盖 TweakLoader.dylib 符号链接。

## 加载工作原理

当应用在启用 TweakLoader 的情况下启动时,LiveContainer 按以下顺序加载项目:

1. CydiaSubstrate(Ellekit)
2. 根 `Tweaks` 文件夹中的全局插件
3. 所选应用特定插件文件夹中的插件(递归加载)

LiveContainer 支持导入:

1. `.dylib`
2. `.framework`

## 全局插件与应用特定插件

| 类型 | 文件放置位置 | 范围 |
| --- | --- | --- |
| 全局插件 | 根 `Tweaks` 文件夹 | 为所有应用加载 |
| 应用特定插件 | `Tweaks` 下的子文件夹 | 仅为选择该文件夹的应用加载 |

:::note
管理插件仅在主 LiveContainer(蓝色)和私有应用中可用。如果您想为共享应用加载插件,请在向其添加插件之前将其转换为私有应用。完成后,您可以将其转换回来,插件仍然可以工作。
:::

要分配应用特定文件夹:

1. 打开 `模块` 选项卡。
2. 创建新文件夹。
3. 将插件导入该文件夹。
4. 打开应用设置并将 `模块文件夹` 设置为该文件夹。

对于共享应用,`模块文件夹` 在应用设置中是只读的。如果需要,请将应用切换到私有模式,配置插件文件夹,然后切换回来。

## 管理插件

1. 导入:`模块` 选项卡 -> `+` -> `导入模块`
2. 新文件夹:`模块` 选项卡 -> `+` -> `新建文件夹`
3. 重命名:长按项目 -> `重命名`
4. 删除:向左滑动项目 -> `删除`

## 插件签名

插件必须先签名才能成功加载。

LiveContainer 在应用启动前自动处理此操作:

1. 它检查插件文件和现有的 `TweakInfo.plist` 记录。
2. 当文件更改或签名无效/过期时,它会重新签名。
3. 签名后它会更新 `TweakInfo.plist`。

您还可以使用 `Tweaks` 选项卡中的 `Sign` 按钮手动强制重新签名。

## 相关应用设置

这些选项会影响插件行为:

1. `不注入TweakLoader`: 在修补/签名期间不注入加载器加载命令。
2. `不加载TweakLoader`: 当第一个选项可用时,也跳过运行时加载。

如果两者都启用,则不会为该应用加载任何插件(包括 TweakLoader.dylib 本身)。

## 故障排除

1. 插件未应用于一个应用:
检查应用的 `Tweak Folder` 是否设置正确,以及应用设置中是否未禁用 TweakLoader。
2. 插件未应用于任何应用:
检查全局插件是否已添加到根 `Tweaks` 文件夹并已签名。
3. Framework 插件加载失败:
检查 framework bundle 是否包含有效的 `Info.plist` 和 `CFBundleExecutable`。
4. 设置后插件仍然失败:
测试该插件的直接注入,因为兼容性可能有所不同。
5. Invalid Signature: 您可能需要手动重新签名您的插件。
